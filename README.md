# 仿知乎项目

## 项目简介

本项目是一个基于 **Go-Zero + gRPC + Kafka + Redis + MySQL + Elasticsearch** 构建的微服务实践项目，围绕内容社区场景实现了文章、点赞、关注、消息等核心能力。  
重点面向高并发与高可用场景，完成了缓存优化、异步解耦、最终一致性保障以及全链路可观测体系建设，具备较强的工程落地价值与面试展示价值。

## 核心亮点

### 1）高可用缓存体系（双层缓存 + 降级保护）

- 构建 **BizRedis（ID/索引缓存） + CacheRedis（行数据缓存）** 双层缓存架构；
- 引入 **SingleFlight** 抑制并发击穿，并结合服务熔断降级保障极端流量下的稳定性；
- Redis 采用主从部署提升可用性与容灾能力；
- 优化后缓存命中率提升至 **85%**，MySQL 查询量下降 **2k+**，核心接口 **P99 从 200ms 降至 60ms**。

### 2）高并发链路设计（Kafka 异步化）

- 在点赞等高频写场景中引入 **Kafka 异步化处理链路**，将同步写压力从主请求链路剥离；
- 通过消息队列实现削峰填谷，提升系统在流量突增场景下的吞吐能力和稳定性；
- 为后续扩展消费能力（计数聚合、风控、推荐侧订阅）提供统一事件入口。

### 3）数据最终一致性保障

- 对高频写操作采用“缓存快速响应 + 异步落库 + 定时对账回刷”的最终一致性方案；
- 通过幂等键（如 `userId + bizId + action`）避免重复消费与重复写入；
- 结合重试与补偿机制，保障异常场景下数据可恢复、可追溯、可修正。

### 4）全链路监控与告警

- 在 **GORM / Elasticsearch** 访问层埋点，接入 **Prometheus + Jaeger** 实现指标监控与调用链追踪；
- 建立统一错误码体系（`xcode`）与 gRPC 拦截器，提升跨服务语义一致性；
- 明显降低联调与排障成本，缩短故障定位链路并优化 MTTR（平均恢复时长）。

## 技术栈

- **后端框架**：Go-Zero、gRPC
- **中间件**：Kafka、Redis、MySQL、Elasticsearch
- **可观测性**：Prometheus、Jaeger
- **工程能力**：统一错误码、拦截器、缓存降级、异步解耦、最终一致性
